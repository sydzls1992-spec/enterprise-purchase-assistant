# 企购内购信息助手 - 小红书数据通道集成版

## 📋 项目概述

企购内购信息助手是一个基于三层架构的Web应用，专注于自动化采集、处理和发布小红书等平台的企业内购信息。系统已成功打通小红书数据通道，实现实时数据采集和智能分析。

## 🎯 核心功能

### 小红书数据通道
- ✅ **实时数据采集**: 自动采集小红书内购、折扣相关信息
- ✅ **智能内容识别**: AI驱动的折扣信息提取和品牌识别
- ✅ **可信度评估**: 基于互动数据的多维度可信度计算
- ✅ **数据清洗过滤**: 自动过滤低质量和重复内容
- ✅ **实时监控面板**: 可视化数据采集状态和趋势分析

### 数据处理能力
- 🔍 **关键词搜索**: 支持内购、员工折扣、企业采购等多关键词
- 🏷️ **品牌识别**: 自动识别Apple、华为、Nike等主流品牌
- 💰 **折扣提取**: 智能识别百分比折扣、满减优惠等信息
- 📊 **趋势分析**: 实时分析采集趋势和品牌分布
- ⚡ **实时同步**: 5分钟间隔自动数据更新

## 🏗️ 架构设计

### 前台 (Frontend)
**文件**: `index.html`, `frontend-controller.js`
- **职责**: 用户界面交互、数据展示、用户体验
- **功能**: 
  - 响应式界面设计，支持移动端
  - 小红书数据专项管理界面
  - 实时数据图表展示
  - 手动触发数据采集
  - 数据筛选和排序功能

### 中台 (Middleware)
**文件**: `middleware-api.js`, `config.js`
- **职责**: 前后端数据交互、业务逻辑处理、API调用
- **功能**:
  - 小红书API集成封装
  - 数据缓存和限流控制
  - 错误处理和降级方案
  - 配置管理和参数调优

### 后台 (Backend)
**文件**: `backend-service.js`
- **职责**: 数据处理、业务逻辑、外部系统集成
- **功能**:
  - XiaohongshuAPI类实现
  - 数据采集调度器
  - 数据清洗和分类器
  - 可信度评估算法
  - 系统监控和日志

## 🚀 快速开始

### 1. 系统要求
- 现代浏览器 (Chrome, Firefox, Safari, Edge)
- 无需额外依赖，直接运行

### 2. 启动方式
```bash
# 直接在浏览器中打开
open index.html

# 或使用本地服务器
python -m http.server 8000
# 访问 http://localhost:8000
```

### 3. 首次使用
1. 打开系统后自动初始化
2. 进入"数据采集与处理"模块
3. 点击"立即采集"按钮手动触发小红书数据采集
4. 查看实时采集结果和统计数据

## 📱 使用指南

### 小红书数据管理
1. **数据采集**
   - 自动采集：系统每5分钟自动采集一次
   - 手动采集：点击"立即采集"按钮触发
   - 关键词：内购、员工折扣、企业采购、限时优惠等

2. **数据查看**
   - 总采集量：显示历史总采集数量
   - 折扣信息：统计包含折扣信息的条目
   - 高可信度：可信度80%以上的高质量数据
   - 今日新增：当天新采集的数据量

3. **数据筛选**
   - 按类型筛选：全部类型、折扣信息、内购信息、限时优惠
   - 按排序方式：可信度排序、时间排序、热度排序

### 配置管理
在 `config.js` 中可以调整以下参数：
```javascript
// 小红书采集配置
xiaohongshu: {
    enabled: true,                    // 是否启用
    interval: 5 * 60 * 1000,        // 采集间隔(毫秒)
    maxResults: 50,                  // 每次最大采集数量
    keywords: [...],                 // 搜索关键词列表
    credibility: {                   // 可信度配置
        minScore: 60,                // 最低可信度
        weights: {...}               // 权重配置
    }
}
```

## 🔧 技术特性

### 小红书API集成
- **请求限流**: 防止请求过频导致封禁
- **错误重试**: 自动重试失败的请求
- **数据解析**: 智能解析小红书返回的JSON数据
- **降级方案**: API失败时自动使用模拟数据

### 数据处理算法
- **内容类型检测**: 基于关键词和模式匹配
- **可信度计算**: 综合考虑点赞、评论、收藏等互动数据
- **品牌识别**: 预定义品牌库 + 模糊匹配
- **折扣提取**: 正则表达式匹配多种折扣格式

### 性能优化
- **数据缓存**: 中台API缓存减少重复请求
- **懒加载**: 图表和数据按需加载
- **防抖处理**: 避免频繁的用户操作
- **内存管理**: 及时清理不需要的数据

## 📊 数据格式

### 小红书数据结构
```javascript
{
    id: "xhs_1234567890_0",
    title: "Apple 员工内购活动 - 限时7折",
    content: "Apple最新员工内购活动...",
    author: {
        id: "user_123",
        name: "用户名",
        avatar: "头像URL"
    },
    images: ["图片URL1", "图片URL2"],
    tags: ["Apple", "内购", "员工福利"],
    stats: {
        likes: 1234,
        comments: 56,
        shares: 23,
        collects: 89
    },
    publishTime: 1640995200000,
    source: "xiaohongshu",
    type: "internal_purchase",
    credibility: 85,
    discountInfo: {
        type: "percentage",
        value: "7折",
        confidence: 0.8
    },
    brandInfo: {
        name: "Apple",
        confidence: 0.9
    }
}
```

## 🛠️ 扩展开发

### 添加新的数据源
1. 在 `backend-service.js` 中创建新的API类
2. 实现 `searchProducts()` 和相关方法
3. 在 `externalAPIs` 中注册新的API
4. 更新配置文件添加相关配置

### 自定义数据处理逻辑
1. 修改 `DataCleaner` 类实现自定义清洗规则
2. 更新 `DataClassifier` 类实现新的分类逻辑
3. 调整 `DataValidator` 类实现新的验证规则

## 📈 监控和维护

### 系统监控
- 采集成功率监控
- 数据质量评估
- 系统性能指标
- 错误日志记录

### 数据质量
- 可信度分布统计
- 重复数据检测
- 内容质量评分
- 异常数据告警

## 🤝 贡献指南

1. Fork 项目
2. 创建功能分支
3. 提交代码变更
4. 创建 Pull Request

## 📄 许可证

本项目采用 MIT 许可证 - 查看 [LICENSE](LICENSE) 文件了解详情。

## 🆘 支持

如有问题或建议，请：
1. 查看本文档的常见问题
2. 检查浏览器控制台错误信息
3. 提交 Issue 描述问题

---

**注意**: 本系统仅用于学习和研究目的，请遵守相关平台的使用条款和法律法规。